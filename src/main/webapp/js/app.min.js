/*! 
* FUNP - v1.0.0 
* © Copyright 2016  Liangli Huang
 */
$(function(){var a="http://16.168.2.38:8080/",b=angular.module("app",["ngRoute"]);b.config(function(a){a.when("/primary_product",{templateUrl:"app/views/product/primary_product.html",controller:"primaryProductCtrl"}).when("/product_list",{templateUrl:"app/views/product/product_list.html",controller:"productListCtrl"}).when("/new_ar_product_detail/:productID",{templateUrl:"app/views/product/new_ar_product_detail.html",controller:"updateARProductDetail"}).when("/new_ar_product_detail",{templateUrl:"app/views/product/new_ar_product_detail.html",controller:"newARDetailCtrl"}).when("/new_video_product_detail",{templateUrl:"app/views/product/new_video_product_detail.html",controller:"newVideoDetailCtrl"}).when("/first_level_category",{templateUrl:"app/views/category/first_level_category.html",controller:"firstLevelCategoryCtrl"}).when("/second_level_category",{templateUrl:"app/views/category/second_level_category.html",controller:"secondLevelCategoryCtrl"}).when("/user_admin",{templateUrl:"app/views/user/user_admin.html",controller:"userAdminCtrl"}).when("/log_download",{templateUrl:"app/views/log/log_download.html",controller:"logDownloadCtrl"}).otherwise("/primary_product",{templateUrl:"app/views/product/primary_product.html",controller:"otherUrlCtrl"})}),b.controller("primaryProductCtrl",function(){console.log("Arrived at primary product page already!!")}),b.controller("productListCtrl",function(b,c){b.productItems=null,b.productItems_selected=[],b.actionSelected="",b.productItems_copy=[],loading(),getProductListByFilters=function(){var d={};d.type=$("#product_type").prop("selectedIndex"),d.publishState=$("#release_state").prop("selectedIndex"),d.productRecommend=$("#recommendation").prop("selectedIndex"),d.productCategory=$("#product_category").val(),c.post(a+"eden/prods/lists",d).then(function(a){console.log("Get product list by filter successfully."),b.productItems=a.data,b.productItems_copy=a.data,b.productItems_selected=[]},function(a){console.log("Failed to get product list by filter")})},console.log("Invoke product list controller, get product list data from remote here!"),b.searchProductListByFilters=function(){console.log("Starting to search product items by filters..."),console.log("Selected product category: "+$("#product_category").val()+" Selected index: "+$("#product_category").prop("selectedIndex")),console.log("Selected product type: "+$("#product_type").val()+" Selected index: "+$("#product_type").prop("selectedIndex")),console.log("Selected release state: "+$("#release_state").val()+" Selected index: "+$("#release_state").prop("selectedIndex")),console.log("Selected recommendation: "+$("#recommendation").val()+" Selected index: "+$("#recommendation").prop("selectedIndex")),getProductListByFilters()},b.searchProductListByFilters(),b.checkALLYesNo=function(){console.log("Check all flag: "+b.checkAll);var a=$("input[name=mySelectedProduct]");if(a.prop("checked",b.checkAll),b.productItems_selected=[],b.checkAll)for(item in b.productItems_copy)b.productItems_selected.push(b.productItems_copy[item]);console.log("Current selected number: "+b.productItems_selected.length)},b.checkItem=function(a){if(console.log("Check item flag: "+a.checked),a.checked)b.productItems_selected.push(a);else for(item in b.productItems_selected)b.productItems_selected[item].id==a.id&&b.productItems_selected.splice(item,1);console.log("Current selected number: "+b.productItems_selected.length);var c=$("#allCheckControl");0==b.productItems_selected.length?c.prop("checked",!1):b.productItems_selected.length==b.productItems_copy.length&&c.prop("checked",!0)},b.resetSearch=function(){b.productItems=b.productItems_copy,b.searchProductListByFilters()},b.actionClickModal=function(a){console.log("Click button: "+a),b.actionSelected=a},b.actionConfirm=function(){console.log("Confirm action: "+b.actionSelected),angular.forEach(b.productItems_selected,function(d){c.get(a+"eden/prods/opes/"+b.actionSelected+"/"+d.id).then(function(a){console.log(b.actionSelected+" product: "+d.name+" successfully"),getProductListByFilters()},function(a){console.log("Failed to "+b.actionSelected+" product: "+d.name)})}),$(confirmDiag).modal("hide")}}),b.controller("updateARProductDetail",function(a){console.log("Product ID: "+a.productID)}),b.controller("newARDetailCtrl",function(){console.log("Arrived at new AR product detail page already!!")}),b.controller("newVideoDetailCtrl",function(){console.log("Arrived at new video product detail page already!!")}),b.controller("firstLevelCategoryCtrl",function(a){a.firstLevelCategoryItems=null;var b=$("#loadingScreen"),c=b.width();b.css("margin-left",c>441?(c-441)/2:"0px"),$(window).resize(function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px")}),a.firstLevelCategoryItems=[],a.firstLevelCategoryItems[0]={id:"1",firstCategoryName:"语言",modifyDate:new Date},a.firstLevelCategoryItems[1]={id:"2",firstCategoryName:"社会",modifyDate:new Date},a.firstLevelCategoryItems[2]={id:"3",firstCategoryName:"语言",modifyDate:new Date},a.firstLevelCategoryItems[3]={id:"4",firstCategoryName:"社会",modifyDate:new Date},a.firstLevelCategoryItems[4]={id:"5",firstCategoryName:"语言",modifyDate:new Date},firstLevelCategoryItems_temp=[],a.searchByCategory=function(){0==firstLevelCategoryItems_temp.length&&(firstLevelCategoryItems_temp=a.firstLevelCategoryItems),a.firstLevelCategoryItems=[];var b=new RegExp(a.firstCategorySearch,"i");for(item in firstLevelCategoryItems_temp)b.test(firstLevelCategoryItems_temp[item].firstCategoryName)&&a.firstLevelCategoryItems.push(firstLevelCategoryItems_temp[item])},a.deleteItem=function(b){a.selectedFirstLevelCategoryID=b.id,a.selectedFirstLevelCategoryItem=b,console.log("Selected id: "+a.selectedFirstLevelCategoryID)}}),b.controller("secondLevelCategoryCtrl",function(a){a.secondLevelCategoryItems=null;var b=$("#loadingScreen"),c=b.width();b.css("margin-left",c>441?(c-441)/2:"0px"),$(window).resize(function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px")}),a.secondLevelCategoryItems=[],a.secondLevelCategoryItems[0]={id:"1",firstCategoryName:"语言",secondCategoryName:"语言",modifyDate:new Date},a.secondLevelCategoryItems[1]={id:"2",firstCategoryName:"社会",secondCategoryName:"语言",modifyDate:new Date},a.secondLevelCategoryItems[2]={id:"3",firstCategoryName:"语言",secondCategoryName:"社会",modifyDate:new Date},a.secondLevelCategoryItems[3]={id:"4",firstCategoryName:"社会",secondCategoryName:"社会",modifyDate:new Date},a.secondLevelCategoryItems[4]={id:"5",firstCategoryName:"语言",secondCategoryName:"语言",modifyDate:new Date},secondLevelCategoryItems_temp=[],a.searchByCategory=function(){console.log("Select first level: "+a.firstCategorySelected+" second level: "+a.secondCategorySelected),0==secondLevelCategoryItems_temp.length&&(secondLevelCategoryItems_temp=a.secondLevelCategoryItems),a.secondLevelCategoryItems=[],"undefined"==typeof a.secondCategorySelected&&(a.secondCategorySelected="");var b=new RegExp(a.firstCategorySelected,"i"),c=new RegExp(a.secondCategorySelected,"i");for(item in secondLevelCategoryItems_temp)b.test(secondLevelCategoryItems_temp[item].firstCategoryName)&&c.test(secondLevelCategoryItems_temp[item].secondCategoryName)&&a.secondLevelCategoryItems.push(secondLevelCategoryItems_temp[item])},a.deleteItem=function(b){a.selectedSecondLevelCategoryID=b.id,a.selectedSecondLevelCategoryItem=b,console.log("Selected id: "+a.selectedSecondLevelCategoryID)}}),b.controller("userAdminCtrl",function(a){a.userItems=null;var b=$("#loadingScreen"),c=b.width();b.css("margin-left",c>441?(c-441)/2:"0px"),$(window).resize(function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px")}),console.log("Invoke user admin controller, get user admin list data here!"),a.userItems=[],a.userItems[0]={id:"1",phoneNumber:"13xxxxxxxxx",registerDate:new Date,babySex:"男",babyBirthday:new Date},a.userItems[1]={id:"2",phoneNumber:"137xxxxxxxx",registerDate:new Date,babySex:"男",babyBirthday:new Date},a.userItems[2]={id:"3",phoneNumber:"1366xxxxxxx",registerDate:new Date,babySex:"女",babyBirthday:new Date},a.userItems[3]={id:"4",phoneNumber:"13777xxxxxx",registerDate:new Date,babySex:"男",babyBirthday:new Date},a.userItems[4]={id:"5",phoneNumber:"131111xxxxx",registerDate:new Date,babySex:"女",babyBirthday:new Date},userItems_temp=[],a.searchUserListByPhone=function(){0==userItems_temp.length&&(userItems_temp=a.userItems),a.userItems=[];var b=new RegExp(a.searchPhoneNumber,"i");for(item in userItems_temp)b.test(userItems_temp[item].phoneNumber)&&a.userItems.push(userItems_temp[item])},a.resetPWD=function(b){a.selectedUserID=b.id,a.selectedUserItem=b,console.log("Selected user id: "+a.selectedUserID)}}),b.controller("logDownloadCtrl",function(a){a.logItems=null;var b=$("#loadingScreen"),c=b.width();b.css("margin-left",c>441?(c-441)/2:"0px"),$(window).resize(function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px")}),console.log("Invoke log list controller, get download log list data here!"),a.logItems=[],a.logItems[0]={id:"1",phoneNumber:"13xxxxxxxxx",downloadDate:new Date,downloadProductName:"蛋生世界"},a.logItems[1]={id:"2",phoneNumber:"1323425xxxx",downloadDate:new Date,downloadProductName:"蛋生世界"},a.logItems[2]={id:"3",phoneNumber:"1323666xxxx",downloadDate:new Date,downloadProductName:"蛋生世界"},a.logItems[3]={id:"4",phoneNumber:"13234256666",downloadDate:new Date,downloadProductName:"蛋生世界"},a.logItems[4]={id:"5",phoneNumber:"1377425xxxx",downloadDate:new Date,downloadProductName:"蛋生世界"}}),b.controller("otherUrlCtrl",function(){console.log("Otherwise URL contoller...")}),loading=function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px"),$(window).resize(function(){var a=$("#loadingScreen"),b=a.width();a.css("margin-left",b>441?(b-441)/2:"0px")})}}());